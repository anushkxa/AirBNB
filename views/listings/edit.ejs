<%layout("/layouts/boilerplate.ejs")  %>
<body>
    <h3> Edit Your Listing</h3>
    <form method="POST" action="/listings/<%=listing._id%>?_method=PUT" enctype="multipart/form-data" novalidate class="needs-validation">
        <div class="mb-3">
            <input name=listing[title] value="<%= listing.title%>"
            class="form-control"
            required/>
            <div class="invalid-feedback">Enter Valid Title</div>
        </div>

        <div class="mb-3"">
            <textarea name=listing[description] cols="120" class="form-control" required><%= listing.description %></textarea>
            <div class="invalid-feedback">Enter Valid description</div>
        </div>

        <div class="mb-3">
            <label for="image" >Current Image:</label>
            <% if (listing.image && listing.image.url) { %>
            <img src="<%= listing.image.url %>" alt="Current image" style="max-width: 200px; display: block; margin: 10px 0;">
            <% } %>

             <input name="image" type="file" class="form-control" accept="image/*" >
            <small class="form-text text-muted">Upload a new image to replace the current one</small>
        </div>

        <div class="mb-3 col-md-4">
            <input name=listing[price]
            value="<%= listing.price%>"
            type="number" class="form-control" required>
            <div class="invalid-feedback">Enter Valid Price</div>
        </div>

        <div class="mb-3">
            <input name=listing[location] 
            value="<%= listing.location%>"
            type="text" class="form-control" required>
            <div class="invalid-feedback">Location should be Valid</div>
        </div>

        <div class="mb-3">
            <input name=listing[country] 
            value="<%= listing.country%>" class="form-control" required>
            <div class="invalid-feedback">Country should be Valid</div>
        </div>

        <button class="btn btn-danger">Edit</button>
    </form>
<script src="/public/js/script.js"></script>
</body>
